<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{layout}">
<body>
<div layout:fragment="content">
    <h3 class="mb-4">C·∫≠p nh·∫≠t Phi·∫øu M∆∞·ª£n</h3>

    <div class="card shadow">
        <div class="card-header bg-primary text-white">
            <h5 class="mb-0">Ch·ªânh s·ª≠a th√¥ng tin phi·∫øu m∆∞·ª£n</h5>
        </div>

        <div class="card-body">
            <form th:action="@{/phieu-muon/update}" method="post" th:object="${pm}">
                <input type="hidden" th:field="*{id}"/>

                <div class="mb-3">
                    <label class="form-label">M√£ Phi·∫øu</label>
                    <input type="text" th:field="*{maPhieu}" class="form-control"/>
                </div>

                <div class="mb-3">
                    <label class="form-label">Ng√†y M∆∞·ª£n</label>
                    <input type="date" th:field="*{ngayMuon}" class="form-control"/>
                </div>

                <div class="mb-3">
                    <label class="form-label">Tr·∫°ng Th√°i</label>
                    <input type="text" class="form-control"
                           th:value="${pm.trangThai ? 'ƒê√£ Tr·∫£' : 'Ch∆∞a Tr·∫£'}" readonly>
                    <input type="hidden" th:field="*{trangThai}">
                </div>


                <div class="mb-3">
                    <label class="form-label">Thi·∫øt B·ªã ƒê∆∞·ª£c M∆∞·ª£n</label>
                    <div class="border rounded p-2" style="max-height:200px; overflow-y:auto;">
                        <div class="form-check" th:each="tb : ${dsThietBi}">
                            <input class="form-check-input" type="checkbox" name="thietBiIds"
                                   th:value="${tb.id}"
                                   th:checked="${pm.thietBis.contains(tb)}"/>
                            <label class="form-check-label"
                                   th:text="${tb.tenThietBi + ' (' + tb.maThietBi + ')'}"></label>
                            <span th:text="${tb.daMuon ? ' (ƒêang m∆∞·ª£n)' : ' (S·∫µn s√†ng)'}"
                                  th:classappend="${tb.daMuon} ? 'text-warning' : 'text-success'"></span>
                        </div>
                    </div>
                </div>

                <div class="d-flex justify-content-between">
                    <a th:href="@{/phieu-muon}" class="btn btn-secondary">‚¨Ö Quay l·∫°i</a>
                    <button type="submit" class="btn btn-success">üíæ L∆∞u thay ƒë·ªïi</button>
                </div>
            </form>
        </div>
    </div>
</div>
</body>
</html>
